[report]
	name="ExpiringRegs"
	auth=reg_admin
	csvfile="expiringRegs"
    index=regid
[F001]
    name=Expires
    sql=m.enddate
    title="Expire Date"
[F004]
    name=Perid
	sql=p.id
	title="Perid"
	align=right
	minWidth=80
[F005]
    name=fullName
    sql="TRIM(REGEXP_REPLACE(CONCAT_WS(' ', p.first_name, p.middle_name, p.last_name, p.suffix), '  *', ' '))"
    title="Full Name"
    minWidth=300
[F006]
    name=Label
    sql=m.label
    title=Label
    filter=true
[F007]
    name=price
    sql=r.price
    title=Price
    filter=number
    align=right
[F008]
    name=createdBy
    sql=r.create_user
    title="Created by"
    align=right
    minWidth=80
[F009]
    name=createDate
    sql=r.create_date
    title="Create Date"
[F011]
    name=source
    sql=t.type
    title=Source
[F100]
    name=first_name
    sql=p.first_name
    visible=false
[F101]
    name=last_name
    sql=p.last_name
    visible=false
[F102]
    name=middle_name
    sql=p.middle_name
    visible=false
[T001]
	name=reg
	alias=r
[T002]
	name=memLabel
	alias=m
	join="m.id = r.memId"
[T003]
    name=transaction
    alias=t
    join="r.create_trans = t.id"
    left=true
[T004]
    name=perinfo
    alias=p
    join="r.perid = p.id"
[T005]
    name=conlist
    alias=l
    join="r.conid = l.id"
[P001]
    type=config
    section=con
    item=id
    datatype=i
[where]
	001="r.conid = ? AND r.status = 'unpaid' AND r.price > 0  AND r.paid = 0"
[sort]
	001="m.enddate, last_name, first_name, middle_name"
